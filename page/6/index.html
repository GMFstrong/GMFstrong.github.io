<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ConqUeroR</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="From Zero to the DevOps">
<meta property="og:type" content="website">
<meta property="og:title" content="ConqUeroR">
<meta property="og:url" content="http://gmfdevops.com.com/page/6/index.html">
<meta property="og:site_name" content="ConqUeroR">
<meta property="og:description" content="From Zero to the DevOps">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ConqUeroR">
<meta name="twitter:description" content="From Zero to the DevOps">
  
    <link rel="alternative" href="/atom.xml" title="ConqUeroR" type="application/atom+xml">
  
  
    <link rel="icon" href="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
  
  

  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
      <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script>AV.initialize("your_app_id", "your_app_key");</script>
<script src="/js/Counter.js"></script>
  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1530275036756&amp;di=fbef4a64ede1f8237b28de7618e9a502&amp;imgtype=0&amp;src=http%3A%2F%2Ftx.haiqq.com%2Fuploads%2Fallimg%2F170507%2F0Q25BU9-8.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">ConqUeroR</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/categories/websec">Web安全</a></li>
				        
							<li><a href="/categories/linux">Linux基础</a></li>
				        
							<li><a href="/categories/linux-ser1">Linux服务</a></li>
				        
							<li><a href="/categories/linux-ser2">Linux集群</a></li>
				        
							<li><a href="/categories/shell">Shell编程</a></li>
				        
							<li><a href="/categories/python">Python脚本</a></li>
				        
							<li><a href="/categories/network">网络配置</a></li>
				        
							<li><a href="/categories/other">其它</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/smackgg/hexo-theme-smackdown">smackdown</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">ConqUeroR</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1530275036756&amp;di=fbef4a64ede1f8237b28de7618e9a502&amp;imgtype=0&amp;src=http%3A%2F%2Ftx.haiqq.com%2Fuploads%2Fallimg%2F170507%2F0Q25BU9-8.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">ConqUeroR</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/categories/websec">Web安全</a></li>
		        
					<li><a href="/categories/linux">Linux基础</a></li>
		        
					<li><a href="/categories/linux-ser1">Linux服务</a></li>
		        
					<li><a href="/categories/linux-ser2">Linux集群</a></li>
		        
					<li><a href="/categories/shell">Shell编程</a></li>
		        
					<li><a href="/categories/python">Python脚本</a></li>
		        
					<li><a href="/categories/network">网络配置</a></li>
		        
					<li><a href="/categories/other">其它</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Linux文件权限总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/26/Linux文件权限总结/" class="article-date">
  	<time datetime="2019-07-26T11:19:22.000Z" itemprop="datePublished">2019-07-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/26/Linux文件权限总结/">
        Linux文件权限总结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>chown可以用来修改文件的属主和属组：</p>
</blockquote>
<pre><code>chown [OPTION]  [OWNER][:[GROUP]] 修改文件的所属主和属组。
    -R: 递归
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]# ll</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r--. 1 root root 1162 Jul 26 20:46 f1.txt</span><br><span class="line">[root@localhost date]# chown user1:user1 f1.txt </span><br><span class="line">[root@localhost date]# ll</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r--. 1 user1 user1 1162 Jul 26 20:46 f1.txt</span><br></pre></td></tr></table></figure>
<pre><code>[root@localhost dir1]# ll
total 4
-rw-r--r--. 1 root root 5 Jul 27 15:08 f1.txt
-rw-r--r--. 1 root root 0 Jul 27 15:07 f2.txt
-rw-r--r--. 1 root root 0 Jul 27 15:07 f3.txt
[root@localhost dir1]# chown jim f1.txt 
[root@localhost dir1]# ll
total 4
-rw-r--r--. 1 jim  root 5 Jul 27 15:08 f1.txt
-rw-r--r--. 1 root root 0 Jul 27 15:07 f2.txt
-rw-r--r--. 1 root root 0 Jul 27 15:07 f3.txt
[root@localhost dir1]# chown :test f1.txt      #冒号后跟组名更改属组
[root@localhost dir1]# ll
total 4
-rw-r--r--. 1 jim  test 5 Jul 27 15:08 f1.txt
-rw-r--r--. 1 root root 0 Jul 27 15:07 f2.txt
-rw-r--r--. 1 root root 0 Jul 27 15:07 f3.txt
</code></pre><blockquote>
<p>修改文件的属组：chgrp<br>    chgrp [OPTION]  GROUP FILE…<br>    chgrp [OPTION]  –reference=RFILE FILE<br>        -R 递归</p>
</blockquote>
<pre><code>[root@localhost dir1]# chgrp jack f3.txt 
[root@localhost dir1]# ll
total 4
-rw-r--r--. 1 jim  test 5 Jul 27 15:08 f1.txt
-rw-r--r--. 1 root root 0 Jul 27 15:07 f2.txt
-rw-r--r--. 1 root jack 0 Jul 27 15:07 f3.txt
</code></pre><p><strong><em>目录权限中，x执行权限是基本权限，若没有执行权限就无法进入该目录。目录下的文件的创建与删除取决于该目录的w写权限。</em></strong></p>
<p><strong><em>X（大写） 只给目录x权限，不给文件x权限</em></strong></p>
<blockquote>
<p>修改文件权限：chmod [OPTION]  MODE[,MODE]  FILE</p>
</blockquote>
<p>-R 递归修改权限</p>
<pre><code>MODE：
修改一类用户的所有权限
    u= g= o= ug= a= u=,g=
修改一类用户某位或某些位权限
    u+ u- g+ g- o+ o- a+ a- + -
chmod [OPTION] --reference=RFILE FILE
    参考RFILE文件的权限，将FILE的修改为同RFILE
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]# ll</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 2 root  root    45 Jul 27 15:07 dir1</span><br><span class="line">-rw-r--r--. 1 user1 user1 1162 Jul 26 20:46 f1.txt</span><br><span class="line">[root@localhost date]# chmod u=rwx,g=rw,o=r f1.txt </span><br><span class="line">[root@localhost date]# ll</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 2 root  root    45 Jul 27 15:07 dir1</span><br><span class="line">-rwxrw-r--. 1 user1 user1 1162 Jul 26 20:46 f1.txt</span><br></pre></td></tr></table></figure>
<pre><code>[root@localhost dir1]# ll
total 4
-rw-r--r--. 1 jim  test 5 Jul 27 15:08 f1.txt
-rw-r--r--. 1 root root 0 Jul 27 15:07 f2.txt
-rw-r--r--. 1 root jack 0 Jul 27 15:07 f3.txt
[root@localhost dir1]# chmod u+x f3.txt 
[root@localhost dir1]# ll
total 4
-rw-r--r--. 1 jim  test 5 Jul 27 15:08 f1.txt
-rw-r--r--. 1 root root 0 Jul 27 15:07 f2.txt
-rwxr--r--. 1 root jack 0 Jul 27 15:07 f3.txt
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/linux/">linux</a>
	</div>


      
        
<div class="counter-tag counter">
    <span id="/2019/07/26/Linux文件权限总结/" class="leancloud_visitors post-title-link"
          style="font-size: 12px" data-flag-title="Linux文件权限总结">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Linux用户添加及属性修改" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/26/Linux用户添加及属性修改/" class="article-date">
  	<time datetime="2019-07-26T11:18:25.000Z" itemprop="datePublished">2019-07-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/26/Linux用户添加及属性修改/">
        Linux用户添加及属性修改
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>用户创建（创建用户时，会从默认的/etc/skel/目录下复制目录结构到所创建用户的家目录下。默认的用户创建配置文件在/etc/default/useradd）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost home]# cat /etc/default/useradd </span><br><span class="line"># useradd defaults file</span><br><span class="line">GROUP=100</span><br><span class="line">HOME=/home</span><br><span class="line">INACTIVE=-1</span><br><span class="line">EXPIRE=</span><br><span class="line">SHELL=/bin/bash</span><br><span class="line">SKEL=/etc/skel</span><br><span class="line">CREATE_MAIL_SPOOL=yes</span><br></pre></td></tr></table></figure>
<pre><code>useradd [options] 用户名
    -u 指定UID。
    -o 配合-u 选项，不检查UID的唯一性，若想要两个用户UID相同可以强制指定UID。
    -g GID 指明用户所属基本组（主组），可为组名，也可以GID。
    -c &quot;COMMENT“ 用户的注释信息。
    -d HOME_DIR 以指定的路径(不存在)为家目录。
    -s SHELL 指明用户的默认shell程序，可用列表在/etc/shells文件中。
    -G GROUP1[,GROUP2,...] 为用户指明附加组，组须事先存在可以是组名亦可是UID。
    -N 不创建私用组做主组，使用users组（gid=100）做主组。
    -r 创建系统用户 CentOS 6: ID&lt;500，CentOS 7: ID&lt;1000（默认不创建家目录，可以使用-m创建）。
    -m 创建家目录，用于系统用户。
    -M 不创建家目录，用于非系统用户。
</code></pre><blockquote>
<p>创建一个登陆后就要求更改密码的用户：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost home]# useradd jack;echo testroot | passwd --stdin jack;passwd -e jack</span><br><span class="line">Changing password for user jack.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">Expiring password for user jack.</span><br><span class="line">passwd: Success</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>创建系统用户（Apache,MySQL，Nginx等）</p>
</blockquote>
<pre><code>useradd -r 用户名 -s /sbin/nologin
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost home]# useradd -r nginx -s /sbin/nologin</span><br><span class="line">[root@localhost home]# ls</span><br><span class="line">jack  jim  tom</span><br><span class="line">[root@localhost home]# getent passwd nginx</span><br><span class="line">nginx:x:995:993::/home/nginx:/sbin/nologin</span><br></pre></td></tr></table></figure>
<blockquote>
<p>根据文件批量创建用户，并根据文件批量为用户添加密码：</p>
</blockquote>
<pre><code>newusers passwd格式文件            批量创建用户
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat passwd.txt </span><br><span class="line">user1:x:1005:1005:This is test!:/home/user1:/sbin/bash</span><br><span class="line">user2:x:1006:1007:This is test!:/home/user2:/sbin/bash</span><br><span class="line">[root@localhost ~]# newusers passwd.txt </span><br><span class="line">[root@localhost ~]# cat /etc/passwd</span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">chrony:x:996:994::/var/lib/chrony:/sbin/nologin</span><br><span class="line">tom:x:1000:1000::/home/tom:/bin/bash</span><br><span class="line">jim:x:1001:1001::/home/jim:/bin/bash</span><br><span class="line">jack:x:1002:1002::/home/jack:/bin/bash</span><br><span class="line">nginx:x:995:993::/home/nginx:/sbin/nologin</span><br><span class="line">user1:x:1005:1005:This is test!:/home/user1:/sbin/bash</span><br><span class="line">user2:x:1006:1007:This is test!:/home/user2:/sbin/bash</span><br></pre></td></tr></table></figure>
<blockquote>
<p>根据文件批量修改用户名密码：</p>
</blockquote>
<pre><code>cat shadow格式文件 | chpasswd      批量更改用户密码
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat pass.txt </span><br><span class="line">user1:testroot</span><br><span class="line">user2:testroot</span><br><span class="line">[root@localhost ~]# cat pass.txt | chpasswd </span><br><span class="line">[root@localhost ~]# cat /etc/shadow</span><br><span class="line">user1:$6$XrEnzKv1yN/5$/p9/R/.4MzvzMbjsIPK1NM39mLW6hK4klP6IluSU7NJfSL2Dci4uxVoHkUfYRPqTx79o4Nqtb1NoF5w1N1lfP0:18104:0:99999:7:::</span><br><span class="line">user2:$6$Npauj/s4aeC/pGK$nLpC6QWIsXXjtDeIf5u0hbbNaesU/yTyObXoJtIluD.OFZf0MLVwmzsdfeI/hbQpyG7zufy.fbPWN2BQ3meDH1:18104:0:99999:7:::</span><br></pre></td></tr></table></figure>
<blockquote>
<p>更改用户属性</p>
</blockquote>
<pre><code>usermod [OPTION] 用户名  
-u UID: 新UID
-g GID: 新主组  
-G GROUP1[,GROUP2,...[,GROUPN]]]：新附加组，原来的附加组将会被 覆盖；若保留原有，则要同时使用-a选项  
-s SHELL：新的默认SHELL  
-c &apos;COMMENT&apos;：新的注释信息  
-d HOME: 新家目录不会自动创建；若要创建新家目录并移动原家数据， 同时使用-m选项  
-l login_name: 新的名字  
-L: lock指定用户,在/etc/shadow 密码栏的增加 !   
-U: unlock指定用户,将 /etc/shadow 密码栏的 ! 拿掉  
-e YYYY-MM-DD: 指明用户账号过期日期  
-f INACTIVE: 设定非活动期限
</code></pre><blockquote>
<p>为用户追加新的附加组：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# id user1</span><br><span class="line">uid=1005(user1) gid=1005(user1) groups=1005(user1)</span><br><span class="line">[root@localhost ~]# usermod -aG user2,tom,jack user1</span><br><span class="line">[root@localhost ~]# id user1</span><br><span class="line">uid=1005(user1) gid=1005(user1) groups=1005(user1),1000(tom),1002(jack),1007(user2)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>锁定指定用户：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat /etc/shadow</span><br><span class="line">user1:$6$XrEnzKv1yN/5$/p9/R/.4MzvzMbjsIPK1NM39mLW6hK4klP6IluSU7NJfSL2Dci4uxVoHkUfYRPqTx79o4Nqtb1NoF5w1N1lfP0:18104:0:99999:7:::</span><br><span class="line">user2:$6$Npauj/s4aeC/pGK$nLpC6QWIsXXjtDeIf5u0hbbNaesU/yTyObXoJtIluD.OFZf0MLVwmzsdfeI/hbQpyG7zufy.fbPWN2BQ3meDH1:18104:0:99999:7:::</span><br><span class="line">[root@localhost ~]# usermod -L user1</span><br><span class="line">[root@localhost ~]# cat /etc/shadow</span><br><span class="line">user1:!$6$XrEnzKv1yN/5$/p9/R/.4MzvzMbjsIPK1NM39mLW6hK4klP6IluSU7NJfSL2Dci4uxVoHkUfYRPqTx79o4Nqtb1NoF5w1N1lfP0:18104:0:99999:7:::</span><br><span class="line">user2:$6$Npauj/s4aeC/pGK$nLpC6QWIsXXjtDeIf5u0hbbNaesU/yTyObXoJtIluD.OFZf0MLVwmzsdfeI/hbQpyG7zufy.fbPWN2BQ3meDH1:18104:0:99999:7:::</span><br></pre></td></tr></table></figure>
<blockquote>
<p>更改用户的shell:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat /etc/passwd</span><br><span class="line">user1:x:1005:1005:This is test!:/home/user1:/sbin/bash</span><br><span class="line">user2:x:1006:1007:This is test!:/home/user2:/sbin/bash</span><br><span class="line">[root@localhost ~]# usermod -s /sbin/csh user1</span><br><span class="line">[root@localhost ~]# cat /etc/passwd</span><br><span class="line">user1:x:1005:1005:This is test!:/home/user1:/sbin/csh</span><br><span class="line">user2:x:1006:1007:This is test!:/home/user2:/sbin/bash</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>删除用户</p>
</blockquote>
<pre><code>userdel [OPTION] 用户名
    -r: 删除用户家目录以及邮件目录
</code></pre><blockquote>
<p>查看用户相关的id信息，可以使用 id  用户名  判断用户是否存在。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">id [OPTION]... [USER]  </span><br><span class="line">    -u: 显示UID  </span><br><span class="line">    -g: 显示GID  </span><br><span class="line">    -G: 显示用户所属的组的ID  </span><br><span class="line">    -n: 显示名称，需配合ugG使用</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# id user1</span><br><span class="line">uid=1005(user1) gid=1005(user1) groups=1005(user1),1000(tom),1002(jack),1007(user2)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>用户密码的相关修改</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">passwd [OPTIONS] UserName: 修改指定用户的密码 </span><br><span class="line">         -d：删除指定用户密码      </span><br><span class="line">         -l：锁定指定用户      </span><br><span class="line">         -u：解锁指定用户      </span><br><span class="line">         -e：强制用户下次登录修改密码    </span><br><span class="line">         -f：强制操作      </span><br><span class="line">         -n mindays：指定最短使用期限      </span><br><span class="line">         -x maxdays：最大使用期限     </span><br><span class="line">         -w warndays：提前多少天开始警告      </span><br><span class="line">         -i inactivedays：非活动期限      </span><br><span class="line">         --stdin：从标准输入接收用户密码 </span><br><span class="line">            示例：echo &quot;PASSWORD&quot; | passwd --stdin USERNAME </span><br><span class="line">[root@localhost ~]# echo 1234567 | passwd --stdin user1 &amp;&gt;/dev/null</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/linux/">linux</a>
	</div>


      
        
<div class="counter-tag counter">
    <span id="/2019/07/26/Linux用户添加及属性修改/" class="leancloud_visitors post-title-link"
          style="font-size: 12px" data-flag-title="Linux用户添加及属性修改">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Linux小技巧" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/26/Linux小技巧/" class="article-date">
  	<time datetime="2019-07-26T11:17:27.000Z" itemprop="datePublished">2019-07-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/26/Linux小技巧/">
        Linux小技巧
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>生成随机密码:</p>
</blockquote>
<pre><code>[root@localhost ~]# cat /dev/urandom |tr -dc &apos;a-zA-Z0-9&apos;|head -c 12
ELOTIcFBGE01
 -d --delete：删除所有属于第一字符集的字符
 -c –C --complement：取字符集的补集      #tr的选项,-dc删除第一字符集以外的所有字符
 -c 取前多少位的字符                     #head的选项
</code></pre><blockquote>
<p>用户家目录被删恢复方法：<br>    1.进入单用户模式<br>    2.复制/etc/skel/到/home/用户名  </p>
</blockquote>
<blockquote>
<p>正在打开的文件被误删除的恢复：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lsof |grep /var/log/messages</span><br><span class="line">rm -f /var/log/messages</span><br><span class="line">lsof |grep /var/log/messages</span><br><span class="line">cat /proc/653/fd/6</span><br><span class="line">cat /proc/653/fd/6 &gt; /var/log/messages</span><br></pre></td></tr></table></figure></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/linux/">linux</a>
	</div>


      
        
<div class="counter-tag counter">
    <span id="/2019/07/26/Linux小技巧/" class="leancloud_visitors post-title-link"
          style="font-size: 12px" data-flag-title="Linux小技巧">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-关于文件系统挂载的一点感悟" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/20/关于文件系统挂载的一点感悟/" class="article-date">
  	<time datetime="2019-07-20T02:44:01.000Z" itemprop="datePublished">2019-07-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/20/关于文件系统挂载的一点感悟/">
        关于文件系统挂载的一点感悟
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>前两天无意中见朋友在讨论，关于不同分区挂载后，inode号相同的问题。（例如：一个Linux系统在安装时分为：/;/boot;/data;/swap几个分区挂载点）</p>
<blockquote>
<p>首先：用stat命令查看各个挂载点的inode号：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# stat /</span><br><span class="line">  File: ‘/’</span><br><span class="line">  Size: 4096      	Blocks: 8          IO Block: 4096   directory</span><br><span class="line">Device: 802h/2050d	Inode: 128         Links: 18</span><br><span class="line">Access: (0555/dr-xr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: system_u:object_r:root_t:s0</span><br><span class="line">Access: 2019-07-24 19:19:12.068000230 +0800</span><br><span class="line">Modify: 2019-07-18 04:37:19.491984636 +0800</span><br><span class="line">Change: 2019-07-18 04:37:19.491984636 +0800</span><br><span class="line"> Birth: -</span><br><span class="line">[root@localhost ~]# stat /date/</span><br><span class="line">  File: ‘/date/’</span><br><span class="line">  Size: 48        	Blocks: 0          IO Block: 4096   directory</span><br><span class="line">Device: 805h/2053d	Inode: 128         Links: 2</span><br><span class="line">Access: (0755/drwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: system_u:object_r:etc_runtime_t:s0</span><br><span class="line">Access: 2019-07-24 20:42:41.043900505 +0800</span><br><span class="line">Modify: 2019-07-24 20:42:30.711971133 +0800</span><br><span class="line">Change: 2019-07-24 20:42:30.711971133 +0800</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure>
<p>发现/和/date的inode号都为128。对于新手会一脸懵逼。</p>
<blockquote>
<p>于是乎,我们用umount卸载/date:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# umount /date/</span><br><span class="line">[root@localhost ~]# stat /date/</span><br><span class="line">  File: ‘/date/’</span><br><span class="line">  Size: 6         	Blocks: 0          IO Block: 4096   directory</span><br><span class="line">Device: 802h/2050d	Inode: 134217856   Links: 2</span><br><span class="line">Access: (0755/drwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: system_u:object_r:root_t:s0</span><br><span class="line">Access: 2019-07-24 19:19:12.112000232 +0800</span><br><span class="line">Modify: 2019-07-18 04:33:59.208991767 +0800</span><br><span class="line">Change: 2019-07-18 04:33:59.208991767 +0800</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure>
<p>发现inode号发生了改变。至于其中原委如下：</p>
<blockquote>
<p>在这之前大家需要弄清楚一下几点：</p>
</blockquote>
<p>(1)在<strong>Linux系统</strong>下，整个 <strong>文件和目录</strong>结构是单根的倒立树状结构，我们成为目录树，而<strong>非Linux系统</strong>下整个文件系统是单根的。</p>
<p>(2)挂载是动作，是Linux文件系统和目录树结合起来的动作。</p>
<p>(3)挂载点，是目录非inode,该目录是进入该文件系统的入口。例如：/，/boot</p>
<p>(4)一个目录只能挂载一个磁盘分区或设备。</p>
<p>(5)我们在进行分区的时候，无论是ext3,ext4或其它格式的文件系统，我们划分了三个分区，分别挂载到了/;/boot;/data目录下。swap分区就另当别论了。<strong>注意以上三个目录是不同的挂载点</strong>这三个目录在作为挂载点时，是水平等价关系。</p>
<p>(6)虽然三个分区都是ext4的文件系统，但他们是三个独立的文件系统，仅仅是格式一样而已。它们三个分区也是平行的等价关系。</p>
<blockquote>
<p>在弄清楚以上七点后，得出以下结论：</p>
</blockquote>
<pre><code>我们有三个文件系统挂载到了三个不同的目录下(挂载点)。
</code></pre><p>所以就有了我们为啥在开始的时候，/和/data还有/boot三个目录(挂载点)的inode号相同了。不是所一个inode号只能对应一个文件吗？(linux下一切皆文件。)但他们三个确确实实是不同的三个文件。故而，这仅仅是3个相同数值的inode号而已。</p>
<pre><code>例如：/的inode为128它是sda2分区文件系统最顶层目录的inode号。
     /boot的inode为128它是sda1分区文件系统最顶层目录的inode号。
</code></pre><blockquote>
<p>此时或许你会问：如果寻找/etc/passwd文件，系统会根据/的inode号进入/的数据块寻找etc的inode号，根据etc的inode号再进入etc的数据块寻找passwd的inode号，最终找到passwd的数据内容。但是如果我们要是寻找/boot/grub文件，系统是如何从/进入/boot的呢？以为/和/boot的inode号相同啊？</p>
</blockquote>
<pre><code>首先，先纠正一下，系统进入/boot不是从/进入的。不要主观意识的这样认为。因为他们同为不同分区的顶级目录，如前文所诉他们在地位上是平等的。
    如果进入/etc/passwd，通过查询挂载信息，顶级目录是/(文件系统1)直接进入文件系统，通过该文件系统的inode号128向下依次查询。
    如果进入/boot/gurb，通过查询挂载信息，顶级目录是/boot(文件系统2)直接进入文件系统，通过该文件系统的inode号128向下依次查询。
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/linux/">linux</a>
	</div>


      
        
<div class="counter-tag counter">
    <span id="/2019/07/20/关于文件系统挂载的一点感悟/" class="leancloud_visitors post-title-link"
          style="font-size: 12px" data-flag-title="关于文件系统挂载的一点感悟">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-vim常用技巧" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/20/vim常用技巧/" class="article-date">
  	<time datetime="2019-07-20T02:44:01.000Z" itemprop="datePublished">2019-07-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/20/vim常用技巧/">
        vim常用技巧
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>以只读方式打开文件：</p>
</blockquote>
<pre><code>vim -m filename
</code></pre><blockquote>
<p>在底行模式下（按“:”）</p>
</blockquote>
<pre><code>!command 执行命令
r!command 读入命令的输出结果
</code></pre><blockquote>
<p>在命令模式下的光标跳转：</p>
</blockquote>
<pre><code>在当前页跳转：
H页首    M页面中间    L页底
^ 跳转至行首的第一个非空白字符
0 跳转至行首 
$ 跳转至行尾 


行间移动：
#G 或者扩展命令模式下:#   跳转至由第#行 
    例如：5G 跳转到第5行
G   最后一行 
1G, gg 第一行 
</code></pre><blockquote>
<p>命令模式下的字符编辑：</p>
</blockquote>
<pre><code>~ 转换大小写
删除命令：
    x 删除光标处的字符  
    dd：删除光标所在的行 
    #dd 多行删除 
    D：从当前光标位置一直删除到行尾，等同于d$ 
复制命令(y, yank)：
    yy：复制行 
    #yy 复制多行 
    Y：复制整行 

粘贴命令(p, paste)： 
    p 缓冲区存的如果为整行，则粘贴当前光标所在行的下方；否则，则粘 贴至当前光标所在处的后面
    P 缓冲区存的如果为整行，则粘贴当前光标所在行的上方；否则，则粘 贴至当前光标所在处的前面 

查找：
    /PATTERN：从当前光标所在处向文件尾部查找     
    ?PATTERN：从当前光标所在处向文件首部查找   

撤销更改：
    u 撤销最近的更改 
    #u 撤销之前多次更改 
</code></pre><blockquote>
<p>关于vim寄存器：</p>
</blockquote>
<pre><code>有26个命名寄存器和1个无命名寄存器，常存放不同的剪贴版内容，可以不同会话间共享

寄存器名称a，b,…,z,格式：“寄存器放在数字和命令之间如：3&quot;tyy 表示复制3行到t寄存器中   &quot;tp  表示将t寄存器内容粘贴 

未指定，将使用无命名寄存器 

有10个数字寄存器，用0，1，…，9表示，0存放最近复制内容，1存放最近删除内容。 当新的文本变更和删除时，1转存到2，2转存到3，以此类推。数字寄存器不能在不 同会话间共享 
</code></pre><blockquote>
<p>在底行模式下查找并替换:</p>
</blockquote>
<pre><code>查找替换中的分隔符/可替换为其它字符
    s@/etc@/var@g 
    s#/boot#/#i 
i 忽略大小写 
g 全局替换，默认情况下，每一行只替换第一次出现 
gc 全局替换，每次替换前询问
</code></pre><blockquote>
<p>使用多个窗口</p>
</blockquote>
<pre><code>vim -o|-O FILE1 FILE2 ... 
    -o: 水平分割 
    -O: 垂直分割 
在窗口间切换：Ctrl+w r
</code></pre><blockquote>
<p>定制vim的工作特性：</p>
</blockquote>
<pre><code>配置文件：永久有效
    全局：/etc/vimrc  
    个人：~/.vimrc 
底行模式：当前vim进程有效 
    (1) 行号 
        显示：set number，简写 set nu 
        取消显示：set nonumber, 简写 set nonu 
    (2) 忽略字符的大小写 
        启用：set ignorecase，简写 set ic 
        不忽略：set noic 
    (3) 自动缩进 
        启用：set autoindent，简写 set ai 
        禁用：set noai 
    (4) 设置光标所在行的标识线 
        启用：set cursorline，简写 set cul 
        禁用：set nocursorline 
    (5) 文件格式 
        启用windows格式：set  fileformat=dos 
        启用unix格式：set fileformat=unix 
        简写 set ff=dos|unix 
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/linux/">linux</a>
	</div>


      
        
<div class="counter-tag counter">
    <span id="/2019/07/20/vim常用技巧/" class="leancloud_visitors post-title-link"
          style="font-size: 12px" data-flag-title="vim常用技巧">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Linux下添加网卡及静态网络配置" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/20/Linux下添加网卡及静态网络配置/" class="article-date">
  	<time datetime="2019-07-20T02:44:01.000Z" itemprop="datePublished">2019-07-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/20/Linux下添加网卡及静态网络配置/">
        Linux下添加网卡及静态网络配置
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>无论是在生产还是测试环境中，为服务器添加网卡都是经常遇到的需求，今天闲暇之余碰到了添加网卡并要为其配置静态IP的情况，特来记录一下：（在centos7环境下）<br>添加完物理网卡后，进入/etc/sysconfig/network-script/，通过查看并没有关于新添加的网卡的配置文件。</p>
<p>所以，我们首先需要通过nmcli con show查看设备名，然后通过nmcli con add con-name eno33554960 type ethernet ifname eno33554960，再在/etc/sysconfig/network-script/查看发现出现了关于添加网卡的配置文件。我们可以通过修改该配置文件定义自己的网络配置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">BOOTPROTO=static</span><br><span class="line"></span><br><span class="line">IPADDR=XXX.XXX.XXX.XXX</span><br><span class="line"></span><br><span class="line">NETMASK=XXX.XXX.XXX.XXX</span><br><span class="line"></span><br><span class="line">GATEWAY=XXX.XXX.XXX.XXX</span><br><span class="line"></span><br><span class="line">ONBOOT=yes</span><br><span class="line"></span><br><span class="line">DNS1=xxx.xxx.xxx</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>在centos7中修改网卡为默认的命名方式：</p>
</blockquote>
<p>（1） vim /etc/default/grub<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_CMDLINE_LINUX=&quot;rhgb quiet net.ifnames=0&quot;</span><br></pre></td></tr></table></figure></p>
<p>（2）生成配置文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-mkconfig -o /etc/grub2.cfg</span><br></pre></td></tr></table></figure></p>
<p>（3）重启：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/network/">network</a>
	</div>


      
        
<div class="counter-tag counter">
    <span id="/2019/07/20/Linux下添加网卡及静态网络配置/" class="leancloud_visitors post-title-link"
          style="font-size: 12px" data-flag-title="Linux下添加网卡及静态网络配置">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-文件查找_locate-find" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/17/文件查找_locate-find/" class="article-date">
  	<time datetime="2019-07-16T19:56:45.000Z" itemprop="datePublished">2019-07-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/17/文件查找_locate-find/">
        文件查找_locate-find
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>在Linux的文件系统中查找文件通常使用两个命令：（1）locate（2）find</p>
</blockquote>
<p><strong><em>其中的locate为非实时性查找，它是基于系统上预建的文件索引数据库查找所以不会对计算机的磁盘IO造成太大的影响。而fand问实时性查找，通过遍历指定路径完成文件查找，故而对计算机的磁盘IO影响是比较大的。</em></strong></p>
<blockquote>
<p>关于locate：</p>
</blockquote>
<pre><code>该程序是通过查看系统上的预建的文件索引数据库： /var/lib/mlocate/mlocate.db 。然而该索引的的构建是在系统较为空闲时自动进行的。也可手动进行（updatedb）。
</code></pre><p><strong><em>虽然locate在使用时比较节省资源，但是索引的构建过程是非常消耗资源的，因为需要遍历整个根文件系统。</em></strong></p>
<blockquote>
<p>locate有以下工作特点：</p>
</blockquote>
<pre><code>• 查找速度快 
• 模糊查找 
• 非实时查找 
• 搜索的是文件的全路径，不仅仅是文件名 
• 可能只搜索用户具备读取和执行权限的目录 
</code></pre><blockquote>
<p>常用选项：</p>
</blockquote>
<pre><code>-i不区分大小写。
-n # 仅仅列出前#匹配到的文件。
-r 使用正则表达式。
</code></pre><p>例如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost qqq]#locate -n 5 -ir &quot;\.cONf$&quot;      </span><br><span class="line">/etc/asound.conf</span><br><span class="line">/etc/autofs.conf</span><br><span class="line">/etc/autofs_ldap_auth.conf</span><br><span class="line">/etc/chrony.conf</span><br><span class="line">/etc/dnsmasq.conf</span><br></pre></td></tr></table></figure></p>
<p><strong><em>关于find的用法介绍：</em></strong></p>
<blockquote>
<p>find [选项] [查找路径] [查找条件] [处理动作]</p>
</blockquote>
<pre><code>查找路径：指定具体目标路径；默认为当前目录。
查找条件：指定的查找标准，可以文件名、大小、类型、权限等标准进行；默认为找出指定路径下的所有文件。
处理动作：对符合条件的文件做操作，默认输出至屏幕
</code></pre><p><strong><em>以下是关于find的查找条件：</em></strong></p>
<blockquote>
<p>指搜索层级</p>
</blockquote>
<pre><code>-maxdepth level 最大搜索目录深度,指定目录下的文件为第1级
-mindepth level 最小搜索目录深度
</code></pre><blockquote>
<p>根据文件名和inode查找：</p>
</blockquote>
<pre><code>-inum n 按inode号查找
-iname &quot;文件名称&quot;：不区分字母大小写
-name &quot;文件名称&quot;：支持使用glob *, ?, [], [^]
-samefile name 相同inode号的文件
-links n 链接数为n的文件
-regex “PATTERN”：以PATTERN匹配整个文件路径，而非文件名称
</code></pre><blockquote>
<p>根据属主、属组查找：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-user USERNAME：查找属主为指定用户(UID)的文件</span><br><span class="line">-group GRPNAME: 查找属组为指定组(GID)的文件</span><br><span class="line">-uid UserID：查找属主为指定的UID号的文件</span><br><span class="line">-gid GroupID：查找属组为指定的GID号的文件</span><br><span class="line">-nouser：查找没有属主的文件</span><br><span class="line">-nogroup：查找没有属组的文件</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>根据文件类型查找<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-type TYPE</span><br><span class="line">• f: 普通文件</span><br><span class="line">• d: 目录文件</span><br><span class="line">• l: 符号链接文件</span><br><span class="line">• s：套接字文件</span><br><span class="line">• b: 块设备文件</span><br><span class="line">• c: 字符设备文件</span><br><span class="line">• p: 管道文件</span><br><span class="line">空文件或目录</span><br><span class="line"> -empty</span><br><span class="line"> 示例：find /app -type d -empty</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>根据⽂件⼤⼩来查找：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-size [+|-]#UNIT</span><br><span class="line"> 常用单位：k, M, G，c（byte）</span><br><span class="line">#UNIT: (#-1, #]</span><br><span class="line"> 如：6k 表示(5k,6k]</span><br><span class="line">-#UNIT：[0,#-1]</span><br><span class="line"> 如：-6k 表示[0,5k]</span><br><span class="line">+#UNIT：(#,∞)</span><br><span class="line"> 如：+6k 表示(6k,∞)</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>根据时间戳：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">以“天”为单位,</span><br><span class="line">-atime [+|-]#,</span><br><span class="line"> #: [#,#+1)</span><br><span class="line"> +#: [#+1,∞]</span><br><span class="line"> -#: [0,#)</span><br><span class="line">-mtime</span><br><span class="line">-ctime</span><br><span class="line">以“分钟”为单位</span><br><span class="line"> -amin</span><br><span class="line"> -mmin</span><br><span class="line"> -cmin</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>根据权限查找：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-perm [/|-]MODE</span><br><span class="line"> MODE: 精确权限匹配</span><br><span class="line"> /MODE：任何一类(u,g,o)对象的权限中只要能一位匹配即可，或关系，+ 从centos7开始淘汰</span><br><span class="line"> -MODE：每一类对象都必须同时拥有指定权限，与关系 0 表示不关注</span><br><span class="line">find -perm 755 会匹配权限模式恰好是755的文件</span><br><span class="line">只要当任意人有写权限时，find -perm +222就会匹配</span><br><span class="line">只有当每个人都有写权限时，find -perm -222才会匹配</span><br><span class="line">只有当其它人（other）有写权限时，find -perm -002才会匹配</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>处理动作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-print：默认的处理动作，显示至屏幕</span><br><span class="line">-ls：类似于对查找到的文件执行“ls -l”命令</span><br><span class="line">-delete：删除查找到的文件</span><br><span class="line">-fls file：查找到的所有文件的长格式信息保存至指定文件中</span><br><span class="line">-ok COMMAND &#123;&#125; \; 对查找到的每个文件执行由COMMAND指定的命令，对于每个文件执行命令之前，都会交互式</span><br><span class="line">要求用户确认</span><br><span class="line">-exec COMMAND &#123;&#125; \; 对查找到的每个文件执行由COMMAND指定的命令</span><br><span class="line">&#123;&#125;: 用于引用查找到的文件名称自身</span><br><span class="line">find传递查找到的文件至后面指定的命令时，查找到所有符合条件的文件一次性传递给后面的命令</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>参数替换xargs<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">由于很多命令不支持管道|来传递参数，而日常工作中有这个必要，所以就有了xargs命令</span><br><span class="line">xargs用于产生某个命令的参数，xargs 可以读入 stdin 的数据，并且以空格符或回车符将 stdin 的数据分隔</span><br><span class="line">成为arguments</span><br><span class="line">注意：文件名或者是其他意义的名词内含有空格符的情况</span><br><span class="line">有些命令不能接受过多参数，命令执行可能会失败，xargs可以解决</span><br><span class="line">示例：</span><br><span class="line"> ls f* |xargs rm</span><br><span class="line"> find /sbin/ -perm +700 |ls -l 这个命令是错误的</span><br><span class="line"> find /bin/ -perm /7000 | xargs ls -l 查找有特殊权限的文件</span><br><span class="line"> find /bin/ -perm -7000 | xargs ls -l 此命令和上面有何区别？</span><br><span class="line">find和xargs格式：find | xargs COMMAND</span><br></pre></td></tr></table></figure></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/linux/">linux</a>
	</div>


      
        
<div class="counter-tag counter">
    <span id="/2019/07/17/文件查找_locate-find/" class="leancloud_visitors post-title-link"
          style="font-size: 12px" data-flag-title="文件查找_locate-find">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-文本处理-sed" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/17/文本处理-sed/" class="article-date">
  	<time datetime="2019-07-16T19:56:45.000Z" itemprop="datePublished">2019-07-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/17/文本处理-sed/">
        文本处理-sed
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong><em>sed作为三剑客之一，在处理文本特别是在更改配置文件时特别方便，它的工作机制和grep类似，都是逐行处理文件，不同的时sed会事先将需要处理的行读入临时缓冲区（模式空间），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕，然后读入下行，执行下一个循环。</em></strong></p>
<blockquote>
<p>sed命令的用法：</p>
</blockquote>
<pre><code>sed 选项 &apos;脚本script&apos; 目标文件
</code></pre><blockquote>
<p>常用选项：-n</p>
</blockquote>
<pre><code>不输出模式空间的内容到屏幕上。场合&apos;script&apos;中的“p”命令配合。
</code></pre><blockquote>
<p>效果如下:</p>
</blockquote>
<pre><code>[root@localhost ~]#sed &apos;p&apos; /etc/passwd
root:x:0:0:root:/root:/bin/bash
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
</code></pre><p><strong><em>在没有-n选项时，会打印两次</em></strong></p>
<pre><code>[root@localhost ~]#sed -n &apos;p&apos; /etc/passwd
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
</code></pre><p><strong><em>因为默认会将模式空间输出的行一次，‘p’命令又会将模式匹配的行输出一次，故而会输出两次。</em></strong></p>
<pre><code>[root@localhost ~]#sed  &apos;/^root/p&apos; /etc/passwd  
root:x:0:0:root:/root:/bin/bash
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
</code></pre><blockquote>
<p>常用选项：-i.bak -i</p>
</blockquote>
<pre><code>&quot;-i.bak&quot;会在原文件中更改模式匹配到的行（更改原文件），同时并复制原文件并在原文件名后加上“.bak”的后缀。
&quot;-i&quot;选项不会备份原文件。
</code></pre><p>例如：</p>
<pre><code>[root@localhost date]#sed -i.bak &apos;/^jim/a +++++++++++++++&apos; passwd 
[root@localhost date]#ls
access_log  fstab  passwd  passwd.bak  script
[root@localhost date]#cat passwd
jim:x:1001:1001::/home/jim:/bin/bash
+++++++++++++++
jack:x:1002:1002::/home/jack:/bin/bash
nginx:x:995:993::/home/nginx:/sbin/nologin
user1:x:1005:1005:This is test!:/home/user1:/sbin/csh
</code></pre><p><strong><em>在原文件做出修改并备份原文件，其中‘a’命令为在匹配到的模式所在的行后边追加一行+++++++</em></strong></p>
<blockquote>
<p>常用选项： -r</p>
</blockquote>
<pre><code>支持使用正则表达式。
</code></pre><p>例如：</p>
<pre><code>[root@localhost date]#sed -r &apos;s/^(SELINUX=)disabled/\1enforcing/&apos; seconfig 

 # This file controls the state of SELinux on the system.
 # SELINUX= can take one of these three values:
 #     enforcing - SELinux security policy is enforced.
 #     permissive - SELinux prints warnings instead of enforcing.
 #     disabled - No SELinux policy is loaded.
 SELINUX=enforcing
 # SELINUXTYPE= can take one of three two values: 
</code></pre><p><strong><em>由于没有使用“-i”选项这里并没有对原文件做出修改。”s/1/2/“命令是搜索1处的内容并替换为2处的内容。</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">替换标记：</span><br><span class="line">g 行内全局替换</span><br><span class="line">p 显示替换成功的行</span><br><span class="line">w /PATH/FILE 将替换成功的行保存至文件中</span><br></pre></td></tr></table></figure></p>
<pre><code>[root@localhost date]#sed &apos;s/root/@@@@@@@/g&apos; passwd
@@@@@@@:x:0:0:@@@@@@@:/@@@@@@@:/bin/bash
</code></pre><p>其他选项如下：</p>
<pre><code>-e 多点编辑
-f /PATH/SCRIPT_FILE 从指定文件中读取编辑脚本
</code></pre><p>以上是有关选项的介绍下面介绍一下有关’script(命令的介绍)’：</p>
<blockquote>
<p>不给地址，默认对全文处理。如下：（由于没有使用-n默认打印两次）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#sed &apos;p&apos; passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br></pre></td></tr></table></figure>
<blockquote>
<p>单地址,’#’代表数字，’$’打印最后一行，’/正则表达式/‘打印匹配到到的行。（在不使用-n选项的情况下，会将进入模式空间的行也打印出来，所以结果如下：）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#sed  &apos;3p&apos; passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#sed -n &apos;$p&apos; passwd  </span><br><span class="line">alice:x:1008:1013::/home/alice:/bin/bash</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#sed -n &apos;/^root/p&apos; passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>
<blockquote>
<p>地址范围：’n,m’ 打印第n到第m之间的行，’n,+m’打印第n行开始之后m行之后的内容，’/正则1/,/正则2/‘打印匹配两个正则之间的行，’n，/正则/‘打印第n行到正则匹配到的之间的所有行。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#sed -n &apos;3,5p&apos; passwd</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#sed -n &apos;3,+5p&apos; passwd</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">sync:x:5:0:sync:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#sed -n &apos;/^b/,/^o/p&apos; passwd </span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">sync:x:5:0:sync:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#sed -n &apos;2,/^sync/p&apos; passwd</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">sync:x:5:0:sync:/sbin:/bin/sync</span><br></pre></td></tr></table></figure>
<blockquote>
<p>‘~’：步进，’1~2’打印奇数行，’2~2’打印偶数行。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#seq 10 | sed -n &apos;1~2p&apos;</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">5</span><br><span class="line">7</span><br><span class="line">9</span><br></pre></td></tr></table></figure>
<p><strong><em>以上命令是有关地址控制的，下面介绍一下常用的编辑命令</em></strong></p>
<blockquote>
<p>p,a命令在此前已经用过，也做过介绍。</p>
</blockquote>
<pre><code>p 打印当前模式空间内容，追加到默认输出之后。
a [\]text 在指定行后面追加文本，支持使用\n实现多行追加
i [\]text 在行前面插入文本
= 为模式空间中的行打印行号
! 模式空间中匹配行取反处理
c [\]text 替换行为单行或多行文本
w /path/file 保存模式匹配的行至指定文件
r /path/file 读取指定文件的文本至模式空间中匹配到的行后
</code></pre><p>下面对 ‘i’，‘=’，‘!’几个常用命令举例：</p>
<blockquote>
<p>在第二行之前追加“=============”</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#sed &apos;2i=============&apos; passwd </span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">=============</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br></pre></td></tr></table></figure>
<blockquote>
<p>显示模式匹配行的行号：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#sed -n &apos;/^jim/=&apos; passwd</span><br><span class="line">24</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>打印没有被匹配到的行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost date]#sed -n &apos;/^root/!p&apos; passwd</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br></pre></td></tr></table></figure></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/linux/">linux</a>
	</div>


      
        
<div class="counter-tag counter">
    <span id="/2019/07/17/文本处理-sed/" class="leancloud_visitors post-title-link"
          style="font-size: 12px" data-flag-title="文本处理-sed">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-shell基本语法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/17/shell基本语法/" class="article-date">
  	<time datetime="2019-07-16T19:56:45.000Z" itemprop="datePublished">2019-07-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/17/shell基本语法/">
        shell基本语法
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>通过正则表达式获取地址ip:</p>
</blockquote>
<pre><code>^(([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$
</code></pre><blockquote>
<p>test,”[ ]”,”[[ ]]”的区别：</p>
</blockquote>
<pre><code>其中test等价于&quot;[ ]&quot;，而&quot;[[ ]]&quot;中的&quot;==&quot;后跟通配符，&quot;=~&quot;后面可以跟正则表达式，并且在&quot;[[ ]]&quot;中的变量一般加双引号，通配符和正则表达式可以不加双引号,-a（并且）
-o(或者)，这两个在&quot;[[ ]]&quot;中不支持。
</code></pre><blockquote>
<p>只读变量</p>
</blockquote>
<pre><code>只读变量：只能声明，但不能修改和删除 
readonly name  
declare   -r name 
查看只读变量： 
readonly  -p
</code></pre><blockquote>
<p>关于位置变量</p>
</blockquote>
<pre><code>$1, $2, ... 对应第1、第2等参数，shift [n]换位置 
$0 命令本身  
$*  传递给脚本的所有参数，全部参数合为一个字符串  
$@  传递给脚本的所有参数，每个参数为独立字符串  
$# 传递给脚本的参数的个数
set --  清空所有位置变量        
</code></pre><p><strong><em>注意：$@ $\</em> 只在被双引号包起来的时候才会有差异*</strong></p>
<blockquote>
<p>在shell中( )和{ }的区别：</p>
</blockquote>
<pre><code>( )会在当前bash下开启一个新的进程，( )中的命令运行完毕后在退出子进程返回父进程。但是父进程中定义的局部变量也会继承到( )创建的子进程中（有时候计算机真TM是个玄学问题。）
[root@centos7 ~]#(umask 066;touch /data/test.txt);touch /data/test2.txt
[root@centos7 ~]#ll /data/test.txt 
-rw------- 1 root root 0 Jul 31 16:11 /data/test.txt
[root@centos7 ~]#ll /data/test2.txt 
-rw-r--r-- 1 root root 0 Jul 31 16:11 /data/test2.txt
[root@centos7 ~]#NAME=mage;( NAME=wang;echo $NAME);echo $NAME
wang
mage
[root@centos7 ~]#NAME=mage;( echo $NAME;NAME=wang;echo $NAME);echo $NAME
mage
wang
mage

{ }则是在当前进程下运行命令。
</code></pre><blockquote>
<p>通过^（亦或）可以实现两个变量的互换：</p>
</blockquote>
<pre><code>[root@centos7 script38]#x=12;y=8;tmp=$x;x=$y;y=$tmp;echo x=$x,y=$y
x=12,y=8
[root@centos7 script38]#x=12;y=8;x=$[x^y];y=$[x^y];x=$[x^y];echo x=$x,y=$y
x=8,y=12
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/shell/">shell</a>
	</div>


      
        
<div class="counter-tag counter">
    <span id="/2019/07/17/shell基本语法/" class="leancloud_visitors post-title-link"
          style="font-size: 12px" data-flag-title="shell基本语法">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-shell条件判断" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/17/shell条件判断/" class="article-date">
  	<time datetime="2019-07-16T19:56:45.000Z" itemprop="datePublished">2019-07-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/17/shell条件判断/">
        shell条件判断
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>[[]]表达式与[]和test用法的选项部分是相同的，其与[]和test测试表达式的区别在于，在[[]]中可以使用通配符等进行模式匹配；并且&amp;&amp;、||、&gt;、&lt;等操作符可以应用于[[]]中，但不能应用于[]中，在[]中一般使用-a、-o、-gt（用于整数）、-lt（用于整数）等操作符代替上文提到的用于[[]]中的符号。</p>
</blockquote>
<blockquote>
<p>用[]测试变量时，如果被测试的变量不加双引号，那么测试结果可能会是不正确的，示例如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@oldboy ~]# echo $oldgirl   #&lt;==这是一个不存在的变量，如果读者已经定义，则可</span><br><span class="line">                                     以执行unset oldgirl取消。</span><br><span class="line">[root@oldboy ~]# [ -f $oldgirl ] &amp;&amp; echo 1 || echo 0   #&lt;==不加引号测试变量。</span><br><span class="line">1 #&lt;==明明$oldgirl变量不存在内容还返回1，逻辑就不对了</span><br><span class="line">[root@oldboy ~]# [ -f &quot;$oldgirl&quot; ] &amp;&amp; echo 1 || echo 0 #&lt;==加引号测试变量。</span><br><span class="line">0 #&lt;==加了双引号就返回0，逻辑就对了。</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>字符串比较时若等号两端没有空格，则会导致判断出现逻辑错误，即使语法没问题，但是结果依然可能不对。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@oldboy ~]# [ &quot;abc&quot;=&quot;1&quot; ] &amp;&amp; echo 1||echo 0  #&lt;==若等号两端不带空格，则会</span><br><span class="line">                                                         出现明显的逻辑错误。</span><br><span class="line">1  #&lt;==明明表达式不成立，却输出了1。</span><br><span class="line">[root@oldboy ~]# [ &quot;abc&quot; = &quot;1&quot; ] &amp;&amp; echo 1||echo 0 #&lt;==带空格的就是准确的。</span><br><span class="line">0  #&lt;==表达式不成立，输出0。</span><br></pre></td></tr></table></figure>
<blockquote>
<p>字符串不加双引号，可能会导致判断上出现逻辑错误，即使语法没问题，但是结果依然可能不对。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@oldboy ~]# var=&quot;&quot; #&lt;==将变量内容置为空。</span><br><span class="line">[root@oldboy ~]# [ -n &quot;$var&quot; ] &amp;&amp; echo 1 || echo 0  #&lt;==有双引号。</span><br><span class="line">0 #&lt;==给变量加双引号，返回0，-n不为空时为真，因为变量内容为空，因此输出0是对的。</span><br><span class="line">[root@oldboy ~]# [ -n $var ] &amp;&amp; echo 1 || echo 0     #&lt;==去掉双引号。</span><br><span class="line">1 #&lt;==同样的表达式，不加引号和加双引号后测试的结果相反，可见加双引号的重要性。</span><br><span class="line">[root@oldboy ~]# [ -z &quot;$var&quot; ] &amp;&amp; echo 1 || echo 0 #&lt;==如果字符串长度为0，则</span><br><span class="line">                                                           输出1，否则输出0。</span><br><span class="line">1</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><img src="1.jpg" alt="img"><br><img src="2.jpg" alt="img"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/shell/">shell</a>
	</div>


      
        
<div class="counter-tag counter">
    <span id="/2019/07/17/shell条件判断/" class="leancloud_visitors post-title-link"
          style="font-size: 12px" data-flag-title="shell条件判断">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2019 ConqUeroR
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>